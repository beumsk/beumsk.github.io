(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{842:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/nextjs-dark-mode",function(){return t(4748)}])},4911:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var s=t(1799),i=t(9396),a=t(5893),r=t(7294),o=t(1664),l=t.n(o),c=t(1163),h=t(4725),d=t.n(h),m=(t(9578),t(8674),t(7013),t(2427),t(7771)),u=t(3422),f=t.n(u),g=t(2362),x=t(6945),p=function(e){return""===e?"No date":"".concat(new Date(e).getDate(),".").concat(new Date(e).getMonth()+1,".").concat(new Date(e).getFullYear())};function j(e){var n=e.children,t=(0,c.useRouter)();(0,r.useEffect)((function(){d().highlightAll()}),[t]);var o=f().find((function(e){return e.slug===t.asPath.replace("/blog/","")})),h=o.title,u=o.intro,j=o.img,w=o.published,b=o.modified,k=o.categories,v=null===k||void 0===k?void 0:k.split(", ").filter((function(e){return e})),N=f()[f().findIndex((function(e){return e.title===h}))+1]||f()[0],T=[f()[f().findIndex((function(e){return e.title===h}))-1]||f()[f().length-1],N];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(x.Z,(0,i.Z)((0,s.Z)({title:"".concat(h," | Blog | R\xe9my Beumier"),description:u,itemtype:"Article"},o),{children:(0,a.jsx)("div",{className:"container narrow post-shape",children:(0,a.jsx)("div",{"data-aos":"fade-left",children:(0,a.jsxs)("article",{children:[(0,a.jsx)("h1",{itemProp:"headline name",children:h}),(0,a.jsx)("img",{src:j,alt:h,width:"300",height:"150",className:"post__img mb-5",itemProp:"image"}),(0,a.jsxs)("div",{className:"space-between-x mb-10",children:[(0,a.jsx)("div",{className:"post__categories",children:null===v||void 0===v?void 0:v.map((function(e){return(0,a.jsx)(l(),{href:"/blog?".concat(e),children:(0,a.jsx)("a",{children:(0,a.jsx)("span",{itemProp:"articleSection",children:e.charAt(0).toUpperCase()+e.slice(1)})})},e)}))}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("time",{className:"post__date",itemProp:"datePublished",content:p(w),dateTime:p(w),children:["Published on: ",p(w)]}),(0,a.jsxs)("time",{className:"post__date",itemProp:"dateModified",content:p(b),dateTime:p(b),children:["Modified on: ",p(b)]})]})]}),(0,a.jsx)("div",{className:"post__content mb-10",itemProp:"articleBody",children:n}),(0,a.jsx)("div",{className:"mb-15",children:(0,a.jsx)(l(),{href:"/blog",children:(0,a.jsxs)("a",{className:"btn",children:[(0,a.jsx)(m.FtK,{className:"mr-1"}),"Back to blog listing"]})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mb-5",children:"Suggested articles"}),(0,a.jsx)(g.Z,{data:T,className:"mb-20"})]})]})})})}))})}},4152:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var s=t(5893);function i(e){var n=e.className,t=e.sandbox,i=e.title;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"code-iframe-wrapper "+(n||""),children:(0,s.jsx)("iframe",{height:"300",title:i,loading:"lazy",src:"https://codesandbox.io/embed/"+t+"?fontsize=14&theme=dark",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts",children:(0,s.jsx)("a",{href:"https://codesandbox.io/s/"+t,target:"_blank",rel:"noopener noreferrer",children:"See the Sandbox by R\xe9my Beumier"})})})})}},4748:function(e,n,t){"use strict";t.r(n);var s=t(5893),i=t(1151),a=t(4911),r=t(4152),o=function(e){var n=e.children;return(0,s.jsx)(a.Z,{children:n})};function l(e){var n=Object.assign({p:"p",h2:"h2",pre:"pre",code:"code",strong:"strong",blockquote:"blockquote"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"When I started listing the features I wanted for my new website, a dark mode toggle was in the top tier list as it's becoming a standard. Even though I'm not a big supporter of dark mode, I know people love it and I was willing to tackle this challenge."}),"\n",(0,s.jsx)(n.h2,{children:"The CSS part"}),"\n",(0,s.jsx)(n.p,{children:"For this feature, we want to use CSS variables. We have a range of variables that will switch according to the color mode.\nHere is a snippet example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:"main {\n  --text: #000000;\n  --text2: #333333;\n  --bg2: #eeeeee;\n  --bg: #ffffff;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Here the dark mode style if the ",(0,s.jsx)(n.code,{children:".dark"})," class is applied. We will see the JavaScript later:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:"main.dark {\n  --text: #ffffff;\n  --text2: #eeeeee;\n  --bg2: #333333;\n  --bg: #000000;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To finalise the styling part, we use the ",(0,s.jsx)(n.code,{children:"prefers-color-scheme"})," check to match users settings.\nIt needs to be overridden with the ",(0,s.jsx)(n.code,{children:".light"})," class.\nThis is done this way:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:"@media (prefers-color-scheme: dark) {\n  main {\n    --text: #ffffff;\n    --text2: #eeeeee;\n    --bg2: #333333;\n    --bg: #000000;\n  }\n  main.light {\n    --text: #000000;\n    --text2: #333333;\n    --bg2: #eeeeee;\n    --bg: #ffffff;\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{children:"The JavaScript and Next.js part"}),"\n",(0,s.jsxs)(n.p,{children:["Let's see how we can make this dark mode toggle with ",(0,s.jsx)(n.code,{children:"useEffect"})," and ",(0,s.jsx)(n.code,{children:"useState"}),".\nFirst, let's create a button that will change the class of our ",(0,s.jsx)(n.code,{children:"main"})," element."]}),"\n",(0,s.jsxs)(n.p,{children:["When we click on the button we toggle the ",(0,s.jsx)(n.code,{children:"theme"})," thanks to React hooks."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { useState } from 'react';\n\nexport default function Main(props) {\n  const [theme, setTheme] = useState('');\n\n  const switchTheme = () => {\n    const newTheme = theme === 'light' ? 'dark' : 'light';\n    setTheme(newTheme);\n  };\n\n  return (\n    <main className={theme}>\n      <button onClick={switchTheme} theme={theme}>\n        {theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'}\n      </button>\n    </main>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["We have a functional button toggling between dark and light modes. However, it will not save anything and if we reload the page, we will face a light mode whatever we opted for. That's where we use ",(0,s.jsx)(n.code,{children:"localStorage"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["In order to access the window object and therefore the localStorage, we must ensure the page has fully loaded. We do this with the ",(0,s.jsx)(n.code,{children:"useEffect(() => {...}, [])"}),".\nWe can then check localStorage and if there is an entry for ",(0,s.jsx)(n.code,{children:"theme"})," we apply it."]}),"\n",(0,s.jsxs)(n.p,{children:["We also update the ",(0,s.jsx)(n.code,{children:"switchTheme"})," to save our theme preference in localStorage."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { useEffect, useState } from 'react';\n\nexport default function Main(props) {\n  const [theme, setTheme] = useState('');\n\n  useEffect(() => {\n    let localTheme = window.localStorage.getItem('theme');\n    setTheme(localTheme);\n  }, []);\n\n  const switchTheme = () => {\n    const newTheme = theme === 'light' ? 'dark' : 'light';\n    window.localStorage.setItem('theme', newTheme);\n    setTheme(newTheme);\n  };\n\n  return (\n    <main className={theme}>\n      <button onClick={switchTheme} theme={theme}>\n        {theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'}\n      </button>\n    </main>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"We have a functional dark mode toggle in your Next.js app by now. In case of struggle, check the steps again or click the full solution link below."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"TLDR"}),": ",(0,s.jsx)("a",{href:"https://codesandbox.io/s/darkmode-0ubir",target:"_blank",children:"Codesandbox: Dark mode toggle in Next.js"}),"."]}),"\n",(0,s.jsx)(r.Z,{sandbox:"darkmode-0ubir",title:"Dark mode toggle in Next.js"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["I really wanted to share my solution for this, as I found it particularly difficult to make it run, especially with the ",(0,s.jsx)(n.code,{children:"localStorage"}),". I hope it will make your coding easier."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Enjoy coding with Next.js!"})]})}n.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.jsx)(o,Object.assign({},e,{children:(0,s.jsx)(l,e)}))}}},function(e){e.O(0,[838,151,365,594,913,734,311,774,888,179],(function(){return n=842,e(e.s=n);var n}));var n=e.O();_N_E=n}]);